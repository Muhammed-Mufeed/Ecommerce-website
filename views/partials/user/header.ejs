<!-- Navbar -->
<div class="navbar">
    <!-- Top Row: Logo, Search Bar, Icons -->
    <div class="top-row">
      <!-- Logo -->
      <div class="logo">PackSmart</div>

      <!-- Search Bar -->
      <div class="search-bar">
        <form id="search-form" action="/userproducts" method="GET">
          <!-- Hidden inputs to preserve current filters -->
          <% if (typeof category !== 'undefined') { %>
            <% (Array.isArray(category) ? category : [category]).forEach(cat => { %>
              <input type="hidden" name="category" value="<%= cat %>">
            <% }) %>
          <% } %>
          <% if (typeof brand !== 'undefined') { %>
            <% (Array.isArray(brand) ? brand : [brand]).forEach(br => { %>
              <input type="hidden" name="brand" value="<%= br %>">
            <% }) %>
          <% } %>
          <% if (typeof availability !== 'undefined') { %>
            <input type="hidden" name="availability" value="<%= availability %>">
          <% } %>
          <% if (typeof minPrice !== 'undefined') { %>
            <input type="hidden" name="minPrice" value="<%= minPrice %>">
          <% } %>
          <% if (typeof maxPrice !== 'undefined') { %>
            <input type="hidden" name="maxPrice" value="<%= maxPrice %>">
          <% } %>
          <% if (typeof sort !== 'undefined') { %>
            <input type="hidden" name="sort" value="<%= sort %>">
          <% } %>
          <!-- Search input -->
          <input type="text" name="search" placeholder="Search products,categories,brands..." value="<%= typeof search !== 'undefined' ? search : '' %>">
          <button type="submit" style="display: none;">Search</button> <!-- Hidden button, Enter key works -->
        </form>
      </div>

      <!-- Icons -->
      <div class="icons">
        <div class="icon">
          <a href="/wishlist">
          <img src="/user/icons/wishlist-2.png" alt="wishlist">
          </a>
        </div>
        
        <div class="user-profile">
          <!-- User Profile Button -->
          <button class="profile-button">
            <img src="/user/icons/profile-icon.png" alt="profile-icon">
          
          </button>
          <!-- Dropdown Menu -->
          <div class="dropdown">
            <% if (userData) { %> <!-- Check if user is logged in -->
              <a href="/userProfile">Profile</a>
              <form action="/logout" method="POST" style="display: inline;">
                <button type="submit" style="background: none; border: none; color: inherit; cursor: pointer;">
                  Logout
                </button>
              </form>
            <% } else { %> <!-- Show Signup and Login if not logged in -->
              <a href="/signup">Signup</a>
              <a href="/login">Login</a>
            <% } %>
          </div>
        </div>

        <div class="cart icon">
          <a href="/cart">
          <img src="/user/icons/cart.png" alt="cart">
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Menu Items Below Navbar -->
  <div class="menu-container">
    <div class="menu">
      <a href="/">Home</a>
      <a href="/userproducts">Products</a>
      <a href="#">Help Center</a>
      <a href="#">About Us</a>
    </div>
  </div>

  <button class="mobile-menu-toggle">â˜°</button>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.querySelector('.mobile-menu-toggle');
  const menu = document.querySelector('.menu');
  
  menuToggle.addEventListener('click', function() {
    menu.classList.toggle('active');
  });
});
  </script>
